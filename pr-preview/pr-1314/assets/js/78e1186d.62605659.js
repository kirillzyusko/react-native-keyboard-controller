"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[16917],{25284:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>a,default:()=>p,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var i=n(74848),r=n(28453),s=n(69026);const o={},a="ChatKit",l={id:"api/components/chat-kit",title:"ChatKit",description:"ChatKit is a purpose-built component for chat application layouts. It handles keyboard appearance, interactive dismissal, and content repositioning with smooth 60/120 FPS animations \u2014 all the keyboard behaviors that chat apps need but general-purpose components struggle to deliver.",source:"@site/docs/api/components/chat-kit.mdx",sourceDirName:"api/components",slug:"/api/components/chat-kit",permalink:"/react-native-keyboard-controller/pr-preview/pr-1314/docs/next/api/components/chat-kit",draft:!1,unlisted:!1,editUrl:"https://github.com/kirillzyusko/react-native-keyboard-controller/tree/main/docs/docs/api/components/chat-kit.mdx",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"\ud83d\udcda Components",permalink:"/react-native-keyboard-controller/pr-preview/pr-1314/docs/next/category/-components"},next:{title:"KeyboardAvoidingView",permalink:"/react-native-keyboard-controller/pr-preview/pr-1314/docs/next/api/components/keyboard-avoiding-view"}},d={},c=[{value:"Props",id:"props",level:2},{value:"<code>ScrollView Props</code>",id:"scrollview-props",level:3},{value:"<code>ScrollViewComponent</code>",id:"scrollviewcomponent",level:3},{value:"<code>freeze</code>",id:"freeze",level:3},{value:"<code>inverted</code>",id:"inverted",level:3},{value:"<code>keyboardLiftBehavior</code>",id:"keyboardliftbehavior",level:3},{value:"<code>always</code>",id:"always",level:4},{value:"<code>whenAtEnd</code>",id:"whenatend",level:4},{value:"<code>persistent</code>",id:"persistent",level:4},{value:"<code>never</code>",id:"never",level:4},{value:"<code>offset</code>",id:"offset",level:3},{value:"Usage with virtualized lists",id:"usage-with-virtualized-lists",level:2},{value:"Example",id:"example",level:2},{value:"Known issues",id:"known-issues",level:2}];function h(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components},{Head:n}=t;return n||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Head",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h1,{id:"chatkit",children:"ChatKit"}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.code,{children:"ChatKit"})," is a purpose-built component for chat application layouts. It handles keyboard appearance, interactive dismissal, and content repositioning with smooth 60/120 FPS animations \u2014 all the keyboard behaviors that chat apps need but general-purpose components struggle to deliver."]}),"\n","\n",(0,i.jsx)(t.h2,{id:"props",children:"Props"}),"\n",(0,i.jsx)(t.h3,{id:"scrollview-props",children:(0,i.jsx)(t.a,{href:"https://reactnative.dev/docs/scrollview#props",children:(0,i.jsx)(t.code,{children:"ScrollView Props"})})}),"\n",(0,i.jsxs)(t.p,{children:["Inherits all ",(0,i.jsx)(t.a,{href:"https://reactnative.dev/docs/scrollview#props",children:"ScrollView Props"}),"."]}),"\n",(0,i.jsx)(t.h3,{id:"scrollviewcomponent",children:(0,i.jsx)(t.code,{children:"ScrollViewComponent"})}),"\n",(0,i.jsxs)(t.p,{children:["Custom component that will be used as a ",(0,i.jsx)(t.code,{children:"ScrollView"}),". Default is ",(0,i.jsx)(t.code,{children:"ScrollView"}),"."]}),"\n",(0,i.jsxs)(t.admonition,{title:"When to use it?",type:"tip",children:[(0,i.jsxs)(t.p,{children:["If you want to use ",(0,i.jsx)(t.code,{children:"ScrollView"})," from ",(0,i.jsx)(t.code,{children:"react-native-gesture-handler"})," you can pass it as a ",(0,i.jsx)(t.code,{children:"ScrollViewComponent"})," prop."]}),(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-tsx",children:'import { ScrollView } from "react-native-gesture-handler";\n\n<ChatKit.ScrollView ScrollViewComponent={ScrollView} />;\n'})})]}),"\n",(0,i.jsx)(t.h3,{id:"freeze",children:(0,i.jsx)(t.code,{children:"freeze"})}),"\n",(0,i.jsxs)(t.p,{children:["When ",(0,i.jsx)(t.code,{children:"true"}),", freezes all keyboard-driven layout changes. This is useful when dismissing the keyboard to show a custom input view (such as an emoji picker or bottom sheet) \u2014 it prevents the chat content from shifting while the transition happens."]}),"\n",(0,i.jsx)(t.h3,{id:"inverted",children:(0,i.jsx)(t.code,{children:"inverted"})}),"\n",(0,i.jsxs)(t.p,{children:["Set to ",(0,i.jsx)(t.code,{children:"true"})," if your list uses the ",(0,i.jsx)(t.code,{children:"inverted"})," prop (the standard pattern for chat-style lists where the newest messages appear at the bottom)."]}),"\n",(0,i.jsx)(t.admonition,{title:"Android limitation",type:"danger",children:(0,i.jsxs)(t.p,{children:["On Android, inverted lists only support ",(0,i.jsx)(t.code,{children:'keyboardLiftBehavior="always"'}),". Other modes are not available when ",(0,i.jsx)(t.code,{children:"inverted={true}"}),"."]})}),"\n",(0,i.jsx)(t.h3,{id:"keyboardliftbehavior",children:(0,i.jsx)(t.code,{children:"keyboardLiftBehavior"})}),"\n",(0,i.jsxs)(t.p,{children:["Controls how the chat content responds when the keyboard appears. Defaults to ",(0,i.jsx)(t.code,{children:'"always"'}),"."]}),"\n",(0,i.jsx)(t.h4,{id:"always",children:(0,i.jsx)(t.code,{children:"always"})}),"\n",(0,i.jsxs)(t.p,{children:["Content always lifts with the keyboard, keeping the bottom messages visible ",(0,i.jsx)(t.strong,{children:"regardless"})," of the current scroll position. This is the most common chat app behavior, used by ",(0,i.jsx)(t.strong,{children:"Telegram"}),", ",(0,i.jsx)(t.strong,{children:"WhatsApp"}),", and others."]}),"\n",(0,i.jsx)(s.A,{src:"/video/chat-kit/always.mov",width:35}),"\n",(0,i.jsx)(t.h4,{id:"whenatend",children:(0,i.jsx)(t.code,{children:"whenAtEnd"})}),"\n",(0,i.jsxs)(t.p,{children:["Content lifts only when the scroll view is ",(0,i.jsx)(t.strong,{children:"at the end"})," (i.e., the last message is visible or near the bottom). If the user has scrolled up to read older messages, the keyboard won't push the content around. This matches the ",(0,i.jsx)(t.strong,{children:"ChatGPT"})," mobile app behavior."]}),"\n",(0,i.jsx)(s.A,{src:"/video/chat-kit/when-at-end.mov",width:35}),"\n",(0,i.jsx)(t.h4,{id:"persistent",children:(0,i.jsx)(t.code,{children:"persistent"})}),"\n",(0,i.jsxs)(t.p,{children:["Content lifts when the keyboard appears, but ",(0,i.jsx)(t.strong,{children:"does not drop back"})," when the keyboard hides. The scroll position stays where it was pushed to. This matches the ",(0,i.jsx)(t.strong,{children:"Claude"})," mobile app behavior."]}),"\n",(0,i.jsx)(t.h4,{id:"never",children:(0,i.jsx)(t.code,{children:"never"})}),"\n",(0,i.jsxs)(t.p,{children:["Content never moves in response to the keyboard. The keyboard simply overlaps the chat. This matches the ",(0,i.jsx)(t.strong,{children:"Perplexity"})," app behavior."]}),"\n",(0,i.jsx)(s.A,{src:"/video/chat-kit/never.mov",width:35}),"\n",(0,i.jsx)(t.h3,{id:"offset",children:(0,i.jsx)(t.code,{children:"offset"})}),"\n",(0,i.jsx)(t.h2,{id:"usage-with-virtualized-lists",children:"Usage with virtualized lists"}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.code,{children:"ChatKit"})," doesn't ship with built-in wrappers for third-party virtualized list libraries, but since all of them (",(0,i.jsx)(t.code,{children:"FlatList"}),", ",(0,i.jsx)(t.code,{children:"FlashList"}),", ",(0,i.jsx)(t.code,{children:"LegendList"}),") accept a custom scroll component, integration is straightforward."]}),"\n",(0,i.jsx)(t.p,{children:"First, create a wrapper component:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-tsx",metastring:'title="VirtualizedListScrollView.tsx"',children:'import { forwardRef } from "react";\nimport { ChatKit } from "react-native-keyboard-controller";\n\nimport type { ScrollViewProps } from "react-native";\n\nconst VirtualizedListScrollView = forwardRef((props: ScrollViewProps, ref) => {\n  return (\n    <ChatKit.ScrollView\n      ref={ref}\n      automaticallyAdjustContentInsets={false}\n      contentInsetAdjustmentBehavior="never"\n      {...props}\n    />\n  );\n});\n\nexport default VirtualizedListScrollView;\n'})}),"\n",(0,i.jsxs)(t.p,{children:["Then pass it to your list via ",(0,i.jsx)(t.code,{children:"renderScrollComponent"}),":"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-tsx",metastring:'title="FlashList"',children:"<FlashList\n  ref={ref}\n  data={messages}\n  keyExtractor={(item) => item.text}\n  renderItem={({ item }) => <Message {...item} />}\n  renderScrollComponent={VirtualizedListScrollView}\n/>\n"})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-tsx",metastring:'title="FlatList/LegendList"',children:"const memoList = useCallback(\n  (props: ScrollViewProps) => <VirtualizedListScrollView {...props} />,\n  [],\n);\n\n<FlatList\n  ref={ref}\n  data={messages}\n  keyExtractor={(item) => item.text}\n  renderItem={({ item }) => <Message {...item} />}\n  renderScrollComponent={memoList}\n/>\n\n<LegendList\n  ref={ref}\n  data={messages}\n  keyExtractor={(item) => item.text}\n  renderItem={({ item }) => <Message {...item} />}\n  renderScrollComponent={memoList}\n/>\n"})}),"\n",(0,i.jsx)(t.h2,{id:"example",children:"Example"}),"\n",(0,i.jsx)("div",{"data-snack-id":"@kirylziusko/chatkit","data-snack-platform":"ios","data-snack-preview":"true","data-snack-theme":"light",style:{overflow:"hidden",background:"#fbfcfd",border:"1px solid var(--color-border)",borderRadius:4,height:505,width:"100%"}}),"\n",(0,i.jsx)(n,{children:(0,i.jsx)("script",{src:"https://snack.expo.dev/embed.js",async:!0})}),"\n",(0,i.jsx)(t.h2,{id:"known-issues",children:"Known issues"}),"\n",(0,i.jsx)(t.p,{children:"TODO: put a real link here"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.a,{href:"https://github.com/software-mansion/react-native-reanimated/issues/5567",children:"react-native-reanimated#5567"}),': Android has undesired "bounce" animation effect on Fabric architecture']}),"\n"]})]})}function p(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>a});var i=n(96540);const r={},s=i.createContext(r);function o(e){const t=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(s.Provider,{value:t},e.children)}},69026:(e,t,n)=>{n.d(t,{A:()=>s});var i=n(86025),r=(n(96540),n(74848));function s({src:e,width:t=100,...n}){const s=(0,i.Ay)(e);return(0,r.jsx)("div",{className:"center video",children:(0,r.jsx)("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,height:"100%",src:s,width:`${t}%`,...n})})}}}]);