"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6104],{28453:(e,t,r)=>{r.d(t,{R:()=>i,x:()=>a});var n=r(96540);const s={},o=n.createContext(s);function i(e){const t=n.useContext(o);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),n.createElement(o.Provider,{value:t},e.children)}},62801:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>h,contentTitle:()=>d,default:()=>m,frontMatter:()=>l,metadata:()=>c,toc:()=>u});var n=r(74848),s=r(28453),o=r(5260),i=r(75030),a=r(69026);const l={slug:"expo-snacks",title:"Version 1.20 \u2014 Expo Snack Support, Reanimated Deprecation Path, and New Features \ud83e\uddec",authors:["kirill"],tags:["react-native","keyboard","expo"],keywords:["react-native-keyboard-controller","expo snack","useAnimatedKeyboard"]},d=void 0,c={permalink:"/react-native-keyboard-controller/blog/expo-snacks",editUrl:"https://github.com/kirillzyusko/react-native-keyboard-controller/tree/main/docs/blog/2025-12-01-release-1-20/index.mdx",source:"@site/blog/2025-12-01-release-1-20/index.mdx",title:"Version 1.20 \u2014 Expo Snack Support, Reanimated Deprecation Path, and New Features \ud83e\uddec",description:"Meet the 1.20.0 release of react-native-keyboard-controller. It\u2019s a small (only 500 lines of code added compared to the previous release), but a very important one - it significantly improves compatibility across the react-native ecosystem.",date:"2025-12-01T00:00:00.000Z",tags:[{inline:!0,label:"react-native",permalink:"/react-native-keyboard-controller/blog/tags/react-native"},{inline:!0,label:"keyboard",permalink:"/react-native-keyboard-controller/blog/tags/keyboard"},{inline:!0,label:"expo",permalink:"/react-native-keyboard-controller/blog/tags/expo"}],readingTime:5.89,hasTruncateMarker:!0,authors:[{name:"Kirill Zyusko",title:"Library author",url:"https://github.com/kirillzyusko",imageURL:"https://github.com/kirillzyusko.png",key:"kirill"}],frontMatter:{slug:"expo-snacks",title:"Version 1.20 \u2014 Expo Snack Support, Reanimated Deprecation Path, and New Features \ud83e\uddec",authors:["kirill"],tags:["react-native","keyboard","expo"],keywords:["react-native-keyboard-controller","expo snack","useAnimatedKeyboard"]},unlisted:!1,nextItem:{title:"Version 1.19 \u2014 A fresh KeyboardToolbar API, instant dismiss, and more! \ud83c\udf89",permalink:"/react-native-keyboard-controller/blog/compound-keyboard-toolbar"}},h={authorsImageUrls:[void 0]},u=[{value:"Expo Snack support",id:"expo-snack-support",level:2},{value:"Deprecated <code>useAnimatedKeyboard</code> hook from <code>react-native-reanimated</code>",id:"deprecated-useanimatedkeyboard-hook-from-react-native-reanimated",level:2},{value:"New <code>assureFocusedInputVisible</code> method for <code>KeyboardAwareScrollView</code>",id:"new-assurefocusedinputvisible-method-for-keyboardawarescrollview",level:2},{value:"Achieved milestones",id:"achieved-milestones",level:2},{value:"\ud83d\udce6 5 releases per year",id:"-5-releases-per-year",level:3},{value:"\ud83c\udf1f 3100 stars on GitHub",id:"-3100-stars-on-github",level:3},{value:"\ud83d\udcc8 450k weekly downloads on npm",id:"-450k-weekly-downloads-on-npm",level:3},{value:"\ud83e\udd1d Impact on open source community",id:"-impact-on-open-source-community",level:3},{value:"\u2764\ufe0f Sponsors support",id:"\ufe0f-sponsors-support",level:3},{value:"\ud83e\udd14 What&#39;s next?",id:"-whats-next",level:2}];function p(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",i:"i",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(t.p,{children:["Meet the ",(0,n.jsx)(t.code,{children:"1.20.0"})," release of ",(0,n.jsx)(t.code,{children:"react-native-keyboard-controller"}),". It\u2019s a ",(0,n.jsx)(t.strong,{children:"small"})," (only 500 lines of code added compared to the previous release), but a very ",(0,n.jsx)(t.strong,{children:"important"})," one - it significantly improves compatibility across the ",(0,n.jsx)(t.code,{children:"react-native"})," ecosystem."]}),"\n",(0,n.jsx)(t.p,{children:"Curious about what\u2019s new? Let\u2019s dive in!"}),"\n","\n",(0,n.jsx)(t.h2,{id:"expo-snack-support",children:"Expo Snack support"}),"\n",(0,n.jsxs)(t.p,{children:["In Expo SDK 54, ",(0,n.jsx)(t.code,{children:"react-native-keyboard-controller"})," lib was added to the ",(0,n.jsx)(t.strong,{children:"Expo Go"}),", which meant you could use the library in any project powered by Expo. However, it still was not fully compatible with Expo Snacks - trying to use it there resulted in errors."]}),"\n",(0,n.jsxs)(t.p,{children:["With version ",(0,n.jsx)(t.code,{children:"1.20.0"}),", that limitation is finally gone. The library now works seamlessly in Expo Snacks as well! \ud83c\udf89 This means you can easily share code, create reproduction examples, and test everything directly in the browser. It\u2019s also a big win for the library itself - I can now rework the documentation and turn all the example code into fully interactive sandboxes."]}),"\n",(0,n.jsxs)(t.p,{children:["Below is an embedded Snack that includes the code I used for my ",(0,n.jsx)(t.a,{href:"https://appjs.co",children:"AppJS Conf"})," demo this year:"]}),"\n",(0,n.jsx)("div",{"data-snack-id":"@kirylziusko/chat-keyboard-avoiding-view","data-snack-platform":"ios","data-snack-preview":"true","data-snack-theme":"light",style:{overflow:"hidden",background:"#fbfcfd",border:"1px solid var(--color-border)",borderRadius:4,height:505,width:"100%"}}),"\n",(0,n.jsx)(o.A,{children:(0,n.jsx)("script",{src:"https://snack.expo.dev/embed.js",async:!0})}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsxs)(t.admonition,{title:"1.13.x Flashbacks",type:"info",children:[(0,n.jsxs)(t.p,{children:["To support ",(0,n.jsx)(t.strong,{children:"Expo Snacks"})," I had to rewrite the mechanism that propagates events to worklet handlers. The last time I made a change like this was in the ",(0,n.jsx)(t.code,{children:"1.13.x"})," release, and in the beginning of this release I've received many bug reports that something wasn't working in various setups."]}),(0,n.jsxs)(t.p,{children:["The new approach ",(0,n.jsx)(t.em,{children:"shouldn't"})," cause issues, ",(0,n.jsx)(t.strong,{children:"but"})," I can not guarantee that nothing will break - every React Native project is unique, and unexpected edge cases do happen. If you notice any incompatibilities between ",(0,n.jsx)(t.code,{children:"1.19.x"})," and ",(0,n.jsx)(t.code,{children:"1.20.x"}),", please bare with me and report a bug. I promise to address everything and ensure even wider compatibility than before!"]})]}),"\n",(0,n.jsxs)(t.h2,{id:"deprecated-useanimatedkeyboard-hook-from-react-native-reanimated",children:["Deprecated ",(0,n.jsx)(t.code,{children:"useAnimatedKeyboard"})," hook from ",(0,n.jsx)(t.code,{children:"react-native-reanimated"})]}),"\n",(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.code,{children:"react-native-reanimated"})," used to provide its own hook for tracking keyboard movement: ",(0,n.jsx)(t.code,{children:"useAnimatedKeyboard"}),"."]}),"\n",(0,n.jsxs)(t.p,{children:["Starting from ",(0,n.jsx)(t.code,{children:"react-native-reanimated@4.2.0"}),", the Reanimated team decided to stop supporting this hook and officially deprecated it and now they recommend to migrate to ",(0,n.jsx)(t.code,{children:"react-native-keyboard-controller"})," instead."]}),"\n",(0,n.jsxs)(t.p,{children:["We\u2019ve worked closely together to prepare a migration guide and ensure the transition is as smooth as possible. To help with that, I added a compatibility version of ",(0,n.jsx)(t.code,{children:"useAnimatedKeyboard"})," directly into this library."]}),"\n",(0,n.jsxs)(t.p,{children:["If you're migrating from ",(0,n.jsx)(t.code,{children:"react-native-reanimated"})," to ",(0,n.jsx)(t.code,{children:"react-native-keyboard-controller"})," and don't want to re-write your entire codebase right away, you can simply switch your imports to the compat layer:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-diff",children:'-import {useAnimatedKeyboard, KeyboardState} from "react-native-reanimated";\n+import {useAnimatedKeyboard, KeyboardState} from "react-native-keyboard-controller";\n'})}),"\n",(0,n.jsxs)(t.p,{children:["That\u2019s all you need to do. If you encounter any bugs or issues, please report them in the ",(0,n.jsx)(t.code,{children:"react-native-keyboard-controller"})," repository."]}),"\n",(0,n.jsxs)(t.h2,{id:"new-assurefocusedinputvisible-method-for-keyboardawarescrollview",children:["New ",(0,n.jsx)(t.code,{children:"assureFocusedInputVisible"})," method for ",(0,n.jsx)(t.code,{children:"KeyboardAwareScrollView"})]}),"\n",(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.code,{children:"KeyboardAwareScrollView"})," already tracks a lot of things - ",(0,n.jsx)(t.strong,{children:"keyboard movements"}),", ",(0,n.jsx)(t.strong,{children:"layout changes"})," of the focused input, ",(0,n.jsx)(t.strong,{children:"cursor position"})," updates, and more. However, in some cases the layout inside the ",(0,n.jsx)(t.code,{children:"KeyboardAwareScrollView"})," can shift unexpectedly (for example, after showing validation errors), and these changes are difficult to track natively."]}),"\n",(0,n.jsxs)(t.p,{children:["Previously, ensuring the focused input stayed visible required writing custom logic to ",(0,n.jsx)(t.em,{children:"estimate"})," how far the view should scroll. This approach came with several drawbacks:"]}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"you had to write and maintain quite a bit of custom code;"}),"\n",(0,n.jsx)(t.li,{children:"the scroll estimation was often inaccurate, especially when users had increased font sizes or other accessibility settings enabled;"}),"\n"]}),"\n","\n",(0,n.jsx)(i.A,{left:(0,n.jsx)(a.A,{src:"/video/validation-without-scroll.mov",width:65}),right:(0,n.jsx)(a.A,{src:"/video/validation-with-scroll.mov",width:65}),leftText:(0,n.jsx)(t.i,{children:"Focused input gets hidden after validation"}),rightText:(0,n.jsx)(t.i,{children:"Focused input remains visible after validation and gets auto-scrolled"})}),"\n",(0,n.jsxs)(t.p,{children:["Starting from ",(0,n.jsx)(t.code,{children:"react-native-keyboard-controller@1.20.0"}),", there\u2019s now a built-in solution: a new method on ",(0,n.jsx)(t.code,{children:"KeyboardAwareScrollView"})," called ",(0,n.jsx)(t.code,{children:"assureFocusedInputVisible"}),"."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-tsx",children:'import {\n  KeyboardAwareScrollView,\n  KeyboardAwareScrollViewRef,\n} from "react-native-keyboard-controller";\n\nfunction LongForm() {\n  const ref = useRef<KeyboardAwareScrollViewRef>(null);\n\n  useEffect(() => {\n    ref.current?.assureFocusedInputVisible();\n  }, [errors]);\n\n  return (\n    <KeyboardAwareScrollView ref={ref} bottomOffset={50}>\n      {/*...*/}\n    </KeyboardAwareScrollView>\n  );\n}\n'})}),"\n",(0,n.jsxs)(t.p,{children:["With this method, you can ensure that the focused input always remains visible \u2014 even after layout changes \u2014 with ",(0,n.jsx)(t.strong,{children:"pixel-perfect accuracy across all configurations"}),", including when accessibility settings like larger fonts are enabled."]}),"\n",(0,n.jsx)(t.h2,{id:"achieved-milestones",children:"Achieved milestones"}),"\n",(0,n.jsxs)(t.p,{children:["I expect this to be the last ",(0,n.jsx)(t.strong,{children:"minor"})," release of the year (though I\u2019ll continue shipping ",(0,n.jsx)(t.strong,{children:"patch"})," releases), so it feels like the right moment to look back at what we\u2019ve all accomplished together. With 2026 around the corner, here\u2019s a small retrospective \u2014 similar to the one I did ",(0,n.jsx)(t.a,{href:"./new-features-achieved-milestones#achieved-milestones",children:"back in 2023"}),"."]}),"\n",(0,n.jsx)(t.h3,{id:"-5-releases-per-year",children:"\ud83d\udce6 5 releases per year"}),"\n",(0,n.jsxs)(t.p,{children:["We\u2019re moving at a fast pace: just like in previous years, we shipped ",(0,n.jsx)(t.strong,{children:"over five releases"})," in 2025 \u2014 each one bringing new features, improvements, and community-requested enhancements."]}),"\n",(0,n.jsx)(t.h3,{id:"-3100-stars-on-github",children:"\ud83c\udf1f 3100 stars on GitHub"}),"\n",(0,n.jsxs)(t.p,{children:["In just two years, the library gained ",(0,n.jsx)(t.strong,{children:"2000+ new GitHub stars"}),". That number still blows my mind. Two years ago we crossed the ",(0,n.jsx)(t.strong,{children:"1000-star"})," mark \u2014 something that already felt surreal \u2014 and now we\u2019re at ",(0,n.jsx)(t.strong,{children:"3100+"}),"."]}),"\n",(0,n.jsx)(t.p,{children:"Thank you to every developer who uses the library, reports issues, contributes ideas, or simply stars the repo. It truly means a lot \u2764\ufe0f"}),"\n",(0,n.jsx)(t.h3,{id:"-450k-weekly-downloads-on-npm",children:"\ud83d\udcc8 450k weekly downloads on npm"}),"\n",(0,n.jsxs)(t.p,{children:["Two years ago, the library had around ",(0,n.jsx)(t.strong,{children:"8,000 weekly downloads"}),". Today, it\u2019s at ",(0,n.jsx)(t.strong,{children:"450,000+"})," \u2014 a ",(0,n.jsx)(t.strong,{children:"56\xd7 growth"})," in just ",(0,n.jsx)(t.strong,{children:"24 months"}),"."]}),"\n",(0,n.jsx)(t.p,{children:"This incredible adoption is a clear sign of how essential smooth keyboard handling is in the React Native ecosystem."}),"\n",(0,n.jsx)(t.h3,{id:"-impact-on-open-source-community",children:"\ud83e\udd1d Impact on open source community"}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"react-native-keyboard-controller"})," is now widely used across the ecosystem - from individual developers to large-scale production apps. Some well-known adopters include:"]}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Bluesky"})," - powering polished keyboard interactions in a high-traffic social app"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Expensify"})," - used in a massive cross-platform codebase with millions of users"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"V0 (Vercel)"})," - helping elevate UX in modern React Native experiences"]}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:"Seeing the library become part of the toolchain for such impactful products is incredibly motivating \u2014 and a reminder of why maintaining open source is worth the effort."}),"\n",(0,n.jsx)(t.h3,{id:"\ufe0f-sponsors-support",children:"\u2764\ufe0f Sponsors support"}),"\n",(0,n.jsx)(t.p,{children:"I want to take a moment to express my deepest gratitude to all the sponsors who support this project. Your contributions genuinely make a difference - without you, it simply wouldn\u2019t be possible to maintain the library at this level of quality, release new features, fix issues quickly, and keep pushing the ecosystem forward."}),"\n",(0,n.jsx)(t.p,{children:"Open source takes time, energy, and consistency, and your support is what makes that effort sustainable. Thank you for believing in the project, for investing in its future, and for helping thousands of developers build better products every day. \u2764\ufe0f"}),"\n",(0,n.jsxs)(t.p,{children:["A huge thank you to all my sponsors: ",(0,n.jsx)(t.a,{href:"https://github.com/hirbod",children:"Hirbod"}),", ",(0,n.jsx)(t.a,{href:"https://github.com/MarceloPrado",children:"MarceloPrado"}),", ",(0,n.jsx)(t.a,{href:"https://github.com/mrtawil",children:"mrtawil"}),", ",(0,n.jsx)(t.a,{href:"https://github.com/ksugaevskaya",children:"ksugaevskaya"}),". ",(0,n.jsx)(t.a,{href:"https://github.com/VladyslavMartynov10",children:"VladyslavMartynov10"}),", ",(0,n.jsx)(t.a,{href:"https://github.com/devoren",children:"devoren"}),", ",(0,n.jsx)(t.a,{href:"https://github.com/bousouninjin",children:"bousouninjin"}),", ",(0,n.jsx)(t.a,{href:"https://github.com/pouyaemami",children:"pouyaemami"}),", ",(0,n.jsx)(t.a,{href:"https://github.com/matinzd",children:"matinzd"}),", ",(0,n.jsx)(t.a,{href:"https://github.com/floydkim",children:"floydkim"}),", ",(0,n.jsx)(t.a,{href:"https://github.com/Stafox",children:"Stafox"}),", ",(0,n.jsx)(t.a,{href:"https://github.com/wise-danya",children:"wise-danya"}),", ",(0,n.jsx)(t.a,{href:"https://github.com/ronintechnologies",children:"ronintechnologies"}),", ",(0,n.jsx)(t.a,{href:"https://github.com/Kasendwa",children:"Kasendwa"}),", ",(0,n.jsx)(t.a,{href:"https://github.com/KingDoxik",children:"KingDoxik"}),", ",(0,n.jsx)(t.a,{href:"https://github.com/plantrail",children:"plantrail"}),", ",(0,n.jsx)(t.a,{href:"https://github.com/flexbox",children:"flexbox"}),", ",(0,n.jsx)(t.a,{href:"https://github.com/Mako-L",children:"Mako-L"}),", ",(0,n.jsx)(t.a,{href:"https://github.com/mk-nickyang",children:"mk-nickyang"}),", ",(0,n.jsx)(t.a,{href:"https://github.com/jerrickhakim",children:"jerrickhakim"}),", ",(0,n.jsx)(t.a,{href:"https://github.com/GNUGradyn",children:"GNUGradyn"}),", ",(0,n.jsx)(t.a,{href:"https://github.com/Toby56",children:"Toby56"})," and ",(0,n.jsx)(t.a,{href:"https://github.com/xoyseau",children:"xoyseau"}),"."]}),"\n",(0,n.jsx)(t.h2,{id:"-whats-next",children:"\ud83e\udd14 What's next?"}),"\n",(0,n.jsxs)(t.p,{children:["As always, my top focus is ",(0,n.jsx)(t.strong,{children:"resolving open issues"})," and keeping the library stable for everyone:"]}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Issues with more \ud83d\udc4d reactions are prioritized first \u2014 that\u2019s how I track what matters most to the community."}),"\n",(0,n.jsxs)(t.li,{children:["Issues labeled \u201csponsor \ud83d\udc96\u201d receive ",(0,n.jsx)(t.strong,{children:"highest priority"})," as part of dedicated sponsor support."]}),"\n"]}),"\n",(0,n.jsxs)(t.p,{children:["As always stay tuned and follow me on ",(0,n.jsx)(t.a,{href:"https://twitter.com/ziusko",children:"Twitter"})," and ",(0,n.jsx)(t.a,{href:"https://github.com/kirillzyusko",children:"GitHub"})," for updates. Thank you for your support! \ud83d\ude0a"]})]})}function m(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(p,{...e})}):p(e)}},69026:(e,t,r)=>{r.d(t,{A:()=>o});var n=r(86025),s=(r(96540),r(74848));function o({src:e,width:t=100,...r}){const o=(0,n.Ay)(e);return(0,s.jsx)("div",{className:"center video",children:(0,s.jsx)("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,height:"100%",src:o,width:`${t}%`,...r})})}},75030:(e,t,r)=>{r.d(t,{A:()=>a});r(96540);var n=r(74848);const s={border:"none"},o={...s,maxWidth:400,textAlign:"center"},i={...s,backgroundColor:"#00000000"};function a({left:e,leftText:t,right:r,rightText:a}){return(0,n.jsx)("table",{children:(0,n.jsxs)("tbody",{children:[(0,n.jsxs)("tr",{style:s,children:[(0,n.jsx)("td",{style:s,children:e}),(0,n.jsx)("td",{style:s,children:r})]}),(0,n.jsxs)("tr",{style:i,children:[(0,n.jsx)("td",{style:o,children:t}),(0,n.jsx)("td",{style:o,children:a})]})]})})}}}]);