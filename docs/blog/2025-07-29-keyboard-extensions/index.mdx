---
slug: keyboard-extensions
title: Keyboard extensions or new way to interact with keyboard üí°
authors: [kirill]
tags: [react-native, keyboard, KeyboardExtender, KeyboardBackgroundView]
keywords:
  [react-native-keyboard-controller, KeyboardExtender, KeyboardBackgroundView]
---

Welcome new `1.18.0` release of `react-native-keyboard-controller` üéâ This release packed with a bunch of new functionality and aims to revolutionize the way we as developers interact with the keyboard.

Keen to learn more? Let's dive üëá

<!-- truncate -->

## New `KeyboardExtender` component üß©

The `react-native-keyboard-controller` was good at:

- keyboard avoidance;
- building additional helpers for keyboard interactions (i. e. `KeyboardToolbar`);
- and showing the content over the keyboard via `OverKeyboardView`.

But this release expanding new horizons and explores new ways how you as a developer can interact with the keyboard. So... ü•Å

This release brings a new component to the table ‚Äî `KeyboardExtender`.

import Lottie from "lottie-react";
import KeyboardExtender from "../../docs/api/views/keyboard-extender/keyboard-extender.lottie.json";

<div style={{ display: "flex", justifyContent: "center", marginBottom: 20 }}>
  <Lottie
    className="lottie"
    animationData={KeyboardExtender}
    style={{ width: 400, height: 400 }}
    loop
  />
</div>

Using this component you not only can avoid the keyboard, but you can design experiences that works with it. If you are building money transfer app, you can use it to show the pre-defined set amount of money **inside** the keyboard.

> Thanks to [Amur](https://github.com/Amurmurmur) for his idea to add that component.

## New `KeyboardBackgroundView` component üé®

While `KeyboardExtender` is a great addition to the existing functionality and will be used by many react-native developers ‚Äî sometimes we want to build our own accessories, that are sticky to the keyboard and at the same time are floating near the keyboard and feels like keyboard elements. This is where `KeyboardBackgroundView` comes to the rescue.

import KeyboardBackgroundView from "../../docs/api/views/keyboard-background-view/keyboard-background-view.lottie.json";

<div style={{ display: "flex", justifyContent: "center", marginBottom: 20 }}>
  <Lottie
    className="lottie"
    animationData={KeyboardBackgroundView}
    style={{ width: 400, height: 400 }}
    loop
  />
</div>

This low-level primitive has only one purpose - to match keyboard background design so that you can attach it anywhere you want and your app users will think that it's a **keyboard extensions** and will interact with that.

In a wild nature there is many apps that are actively using that approach: Photos, Safari and others

import ComparisonTable from "@site/src/components/ComparisonTable";
import Video from "@site/src/components/Video";

<ComparisonTable
  left={<Video src="/video/safari.mp4" width={51} />}
  right={<Video src="/video/photos-app.mp4" width={50} />}
  leftText={<i>iOS Safari app.</i>}
  rightText={<i>iOS Photos app.</i>}
/>

With just a bit of creativity, components like `KeyboardExtender` or `KeyboardBackgroundView` with `KeyboardStickyView` let you go far beyond simple avoidance. Now you have tools to _extend_, _blend_, and _enhance_ the keyboard area by building _rich_, _interactive_ UI elements that actually **extend** the keyboard‚Äôs functionality. So instead of just _avoiding_ the keyboard... you‚Äôre designing experiences that **work** with it ‚Äî or even feel like **they‚Äôre part** of it!

> Thanks to [Seb Vidal](https://github.com/sebjvidal) for his exploration of the keyboard background view idea. ‚ù§Ô∏è

## `useKeyboardState` with selectors

Starting from `1.18.0` the `useKeyboardState` accepts a new argument `selector` which allows you to select a subset of the keyboard state. This is useful when you want to get a specific value from the state, for example, the `height` or `appearance` of the keyboard:

```ts
const appearance = useKeyboardState((state) => state.appearance);
```

Using `selectors` you can reduce amount of frequent re-renders and optimize your app performance.

## Preparation for deep imports deprecation ‚ö†Ô∏è

Starting from `react-native@0.80+` the react-native team [deprecates](https://github.com/react-native-community/discussions-and-proposals/discussions/893) deep imports.

This library was relying on some specific deep imports, but now it adopts the code to the latest adjustments in the code and the latest version of the library shouldn't pollute your console with warnings ü§ì.

## Preloading the keyboard to improve TTI üöÄ

I think maybe react-native developers noticed that in some cases when you set focus the first time, then the keyboard may appear with delay. And this bug is not specific to `react-native-keyboard-controller` ‚Äî it's a general issue with the keyboard on iOS.

<ComparisonTable
  left={<Video src="/video/keyboard-without-preload.mp4" width={65} />}
  right={<Video src="/video/keyboard-with-preload.mp4" width={65} />}
  leftText={<i>The keyboard appears after a significant delay</i>}
  rightText={<i>The keyboard appears instantly</i>}
/>

To solve this problem, I've added a new `preload` method that preloads the keyboard. It's useful when you want to avoid a delay when the user focuses the first input:

```ts
import { KeyboardController } from "react-native-keyboard-controller";

KeyboardController.preload();
```

## `KeyboardAwareScrollView` work with full window `TextInputs`

## `KeyboardStickyView` has correct interpolation for interactive dismissal

## `KeyboardToolbar.Group` component

## `KeyboardGestureArea` and inverted interpolator
